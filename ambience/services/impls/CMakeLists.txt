function(add_service serv_name interface)
    add_library(${serv_name} ${ARGN})
    target_link_libraries(${serv_name} PUBLIC ${interface}_schema)
endfunction()

add_subdirectory(basic_calc)
add_subdirectory(bme280)
add_subdirectory(stm32_flash_serv)
add_subdirectory(stm32_i2c)
add_subdirectory(virtio_blk_serv)
add_subdirectory(littlefs)
add_subdirectory(block_partition)
add_subdirectory(ephemeral_block)
add_subdirectory(basic_echo)