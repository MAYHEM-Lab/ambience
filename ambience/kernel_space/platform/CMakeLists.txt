if(${TOS_PLATFORM} MATCHES "x86_64")
  add_subdirectory(x86_64)
elseif(${TOS_PLATFORM} MATCHES "raspi")
  add_subdirectory(raspi3)
elseif(${TOS_PLATFORM} MATCHES "hosted")
  target_sources(aekernel PRIVATE hosted.cpp)
  target_link_libraries(aekernel PRIVATE arch_drivers)
elseif(${TOS_PLATFORM} MATCHES "stm32")
  add_subdirectory(stm32)
endif()
