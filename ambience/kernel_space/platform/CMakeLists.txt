if (${TOS_ARCH} MATCHES "x86_64")
    target_sources(aekernel PRIVATE x86_64.cpp)
    target_link_libraries(aekernel PRIVATE uart_16550)
elseif (${TOS_PLATFORM} MATCHES "raspi")
    target_sources(aekernel PRIVATE raspi3.cpp)
    target_link_libraries(aekernel PRIVATE arch_drivers)
elseif (${TOS_PLATFORM} MATCHES "hosted")
    target_sources(aekernel PRIVATE hosted.cpp)
    target_link_libraries(aekernel PRIVATE arch_drivers)
endif()