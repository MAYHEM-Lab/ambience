file(GLOB STRING_SRCS "*.c")

foreach(FILE ${STRING_SRCS})
    get_filename_component(FNAME_WE ${FILE} NAME_WE)
    if (EXISTS "${CMAKE_CURRENT_SOURCE_DIR}/../machine/${TOS_ARCH}/${FNAME_WE}.c")
        message(STATUS "Arch overrides ${FILE}")
        continue()
    endif()
    if (EXISTS "${CMAKE_CURRENT_SOURCE_DIR}/../machine/${TOS_ARCH}/${FNAME_WE}.S")
        message(STATUS "Arch overrides ${FILE}")
        continue()
    endif()
    target_sources(picolibc PRIVATE ${FILE})
endforeach()
